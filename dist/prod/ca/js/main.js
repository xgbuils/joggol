!function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){var i=e[o][1][t];return r(i?i:t)},u,u.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){t("./frontpiece_app/init.js")},{"./frontpiece_app/init.js":30}],2:[function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,s){e=e||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var l=1e3;s&&"number"==typeof s.maxKeys&&(l=s.maxKeys);var h=t.length;l>0&&h>l&&(h=l);for(var u=0;h>u;++u){var c,d,p,f,m=t[u].replace(a,"%20"),g=m.indexOf(i);g>=0?(c=m.substr(0,g),d=m.substr(g+1)):(c=m,d=""),p=decodeURIComponent(c),f=decodeURIComponent(d),n(o,p)?r(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],3:[function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(o(t),function(o){var a=encodeURIComponent(r(o))+i;return s(t[o])?n(t[o],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[o]))}).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],4:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":2,"./encode":3}],5:[function(t,e,i){function n(t,e){this.options||(this.options={validate:!0});var e=a({},this.options,e);this.attributes={},this.set(t,e),this.initialize&&this.initialize(t,e),this._built=!0,this._validate(this.attributes,e),this._change(this.attributes,e)}function r(t,e,i,n){var r;if("string"==typeof t)(r={})[t]=e;else{if("object"!=typeof t)return;r=t,i=e}i=a({},this.options,i),n.call(this,r,i),this._validate(this.attributes,i),this._change(r,i)}function s(t){t||(t={});var e=this,i=function(t,i){e.call(this,t,i)},n=t.set;return delete t.set,i.prototype=Object.create(e.prototype),i.prototype.constructor=i,a(i.prototype,t),n&&(i.prototype.set=function(t,e,i){r.call(this,t,e,i,n)}),i.extend=s,i}var o=t("ontrigger"),a=t("object-assign");n.prototype=Object.create(o.prototype),a(n.prototype,{constructor:n,get:function(t){var e=this.attributes;return t?e[t]:e},set:function(t,e,i){r.call(this,t,e,i,function(t,e){this._previousAttributes=a({},this.attributes),a(this.attributes,t)})},isValid:function(){return!this.validationError},_change:function(t,e){var i=[],n=this._previousAttributes;if(this._built&&!e.silent){for(var r in t)this.trigger("change:"+r,n[r]),i.push(r);this.trigger("change",i,n)}},_validate:function(t,e){if(!e.silent&&this._built&&e.validate&&this.validate){var i=this.validationError=this.validate(t,e)||void 0;return this.trigger((i?"in":"")+"valid",this,i),i}}}),n.extend=s,e.exports=n},{"object-assign":23,ontrigger:6}],6:[function(t,e,i){function n(){}n.prototype={on:function(t,e){if(t||"function"==typeof e){this._init();var i=this._events;(i[t]||(i[t]=[])).push(e)}},trigger:function(t){if(t){this._init();for(var e=this._events[t]||[],i=e.length,n=[].slice.call(arguments,1),r=0;i>r;++r)e[r].apply(this,n)}},_init:function(){this._events||(this._events={})}},e.exports=n},{}],7:[function(t,e,i){var n=t("frontpiece.model"),r=t("object-assign"),s=t("is-object"),o=n.prototype,a=o.get,l=o.set,h=n.extend({get:function(t){return u(a.call(this,t))},set:function(t,e){var i=this;i._errors||(i._errors={}),optionsBreak=e.__break?e:r({},e,{__break:!0}),Object.keys(t).forEach(function(e){if(t[e]instanceof n)t[e].on("invalid",function(t,n,r){i.validationError=i._errors[e]=n}),t[e].on("valid",function(t,n,r){delete i._errors[e];var s=Object.keys(i._errors);s.length>0&&(i.validationError=i._errors[s[0]])}),t[e]._parent=i,l.call(i,e,t[e],optionsBreak);else if(s(t[e])){var o=a.call(i,e);o instanceof n?o.set(t[e],optionsBreak):l.call(i,e,t[e],optionsBreak)}else l.call(i,e,t[e],r({},optionsBreak,{silent:!0}))})},_validate:function(t,e){var i,n=Object.keys(this._errors||{});if(n.length>0?(i=this.validationError,this.trigger("invalid",this,i)):i=o._validate.call(this,this.get(),e),!e.__break){var r=this._parent;r&&r._validate(r.get(),e)}return i},_change:function(t,e){if(o._change.call(this,t,e),!e.__break)for(var i=this;i=i._parent;)i.trigger("change")}}),u=function(t){var e=t instanceof n?a.call(t):t;if(s(e)){var i={};for(var r in e)i[r]=u(e[r]);return i}return e};e.exports=h},{"frontpiece.model":8,"is-object":11,"object-assign":23}],8:[function(t,e,i){function n(t,e){this.options||(this.options={validate:!0});var e=o({},this.options,e);this.attributes={},this.set(t,e),this.initialize&&this.initialize(t,e),this._built=!0,this._validate(this.attributes,e),this._change(this.attributes,e)}function r(t,e,i,n){var r;if("string"==typeof e)(r={})[e]=i;else{if("object"!=typeof e)return;r=e,n=i}n=o({},this.options,n),t.call(this,r,n),this._validate(this.attributes,n),this._change(r,n)}var s=t("ontrigger"),o=t("object-assign"),a=t("frontpiece.extend-factory");n.prototype=Object.create(s.prototype),o(n.prototype,{constructor:n,get:function(t){var e=this.attributes;return t?e[t]:e},set:function(t,e,i){r.call(this,function(t,e){this._previousAttributes=o({},this.attributes),o(this.attributes,t)},t,e,i)},isValid:function(){return!this.validationError},_change:function(t,e){var i=[],n=this._previousAttributes;if(this._built&&!e.silent){for(var r in t)this.trigger("change:"+r,n[r]),i.push(r);this.trigger("change",i,n)}},_validate:function(t,e){if(!e.silent&&this._built&&e.validate&&this.validate){var i=this.validationError=this.validate(t,e)||void 0;return this.trigger((i?"in":"")+"valid",this,i),i}}}),n.extend=a({set:r}),e.exports=n},{"frontpiece.extend-factory":9,"object-assign":23,ontrigger:10}],9:[function(t,e,i){function n(t){var e=function(i){i||(i={});var n=this,s=function(t,e){n.call(this,t,e)},o={};for(var a in t)o[a]=i[a],delete i[a];s.prototype=Object.create(n.prototype),s.prototype.constructor=s,r(s.prototype,i);for(var a in o)o[a]&&(s.prototype[a]=function(){var e=[o[a]];[].push.apply(e,arguments),t[a].apply(this,e)});return s.extend=e,s};return e}var r=t("object-assign");e.exports=n},{"object-assign":23}],10:[function(t,e,i){arguments[4][6][0].apply(i,arguments)},{dup:6}],11:[function(t,e,i){"use strict";e.exports=function(t){return"object"==typeof t&&null!==t}},{}],12:[function(t,e,i){var n=t("object-assign"),r={setHash:function(t,e){var i=t.location;i.href=i.href.replace(/#(.*)$/,"")+"#!"+e},getHash:function(t){var e=t.location.href.match(/#(.*)$/);return e?e[1]:""},pushState:function(t,e){t.history.pushState(null,null,e)},getState:function(t){var e=t.location;return decodeURI(e.pathname+e.search+this.getHash())}},s=function(t){t||(t={}),this.routes=[],this.options={pushState:!0};var e=t.mock||{},i=e.window||window,n=this;["setHash","getHash","pushState","getState"].forEach(function(t){n[t]=function(){var e=[].slice.call(arguments);return r[t].apply(n,[i].concat(e))}})};n(s.prototype,{constructor:s,getFragment:function(){var t=this.options,e="";return t.pushState?e=this.getState():(e=this.getHash(),e=/^!\//.test(e)?e.substring(2):""),this.clearSlashes(e)},clearSlashes:function(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")},on:function(t,e){return this.routes.push({re:t,handler:e}),this},remove:function(t){for(var e,i=0;i<this.routes.length,e=this.routes[i];++i)if(e.handler===t||e.re.toString()===t.toString())return this.routes.splice(i,1),this;return this},stop:function(){var t=this.options,e=t.pushState?"popstate":"hashchange";return window.removeEventListener(e,this._onChangeFragment),this.routes=[],t.pushState=void 0,this},trigger:function(t){if(this._trigger){t||(t=this.getFragment());for(var e=0;e<this.routes.length;e++){var i=t.match(this.routes[e].re);if(i)return i.shift(),this.routes[e].handler.apply(this,i),this}}return this},start:function(t){var e=this;t=n(this.options,t),t.pushState&&(t.pushState="onpopstate"in window&&"function"==typeof history.pushState),this._onChangeFragment=function(){current=e.getFragment(),e.trigger(current)};var i=t.pushState?"popstate":"hashchange";return window.addEventListener(i,this._onChangeFragment),this},navigate:function(t,e){if(e=n({},this.options,e),t=t?this.clearSlashes(t):"",e.pushState){var i=this.getFragment();i!==t&&(this.pushState("/"+t),this._trigger=e.trigger,this.trigger(t))}else this.setHash("/"+t);return this}}),e.exports=s},{"object-assign":23}],13:[function(t,e,i){function n(t){this.options||(this.options={});var t=s({},this.options,t);this.initialize&&this.initialize(t)}var r=t("ontrigger"),s=t("object-assign"),o=t("frontpiece.extend-factory");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.extend=o({}),e.exports=n},{"frontpiece.extend-factory":14,"object-assign":23,ontrigger:15}],14:[function(t,e,i){function n(t){var e=function(i){i||(i={});var n=this,s=function(){n.apply(this,arguments)},o={};for(var a in t)o[a]=i[a],delete i[a];s.prototype=Object.create(n.prototype),s.prototype.constructor=s,r(s.prototype,i);for(var a in o)o[a]&&(s.prototype[a]=function(){var e=[o[a]];[].push.apply(e,arguments),t[a].apply(this,e)});return s.extend=e,s};return e}var r=t("object-assign");e.exports=n},{"object-assign":23}],15:[function(t,e,i){arguments[4][6][0].apply(i,arguments)},{dup:6}],16:[function(t,e,i){function n(){var t=Date.now(),e={time:(t-this.played)*this.v};this.func(e),this.id=window.requestAnimationFrame(n.bind(this))}t("./rAF.js");var r=function(t){this.func=t,this.on=!1,this.paused=this.played=Date.now(),this.v=1,this.active=!1};r.prototype={play:function(){this.func&&!this.on&&(this.paused&&(this.played+=Date.now()-this.paused),n.call(this),this.active=this.on=!0)},pause:function(){this.func&&this.on&&(cancelAnimationFrame(this.id),this.active=this.on=!1,this.paused=Date.now())},mute:function(){this.func&&this.on&&(cancelAnimationFrame(this.id),this.active=this.on=!1,this.paused=void 0)},stop:function(){this.func&&(this.pause(),this.paused=this.played=Date.now())},seek:function(t){if(this.func){var e=Date.now();this.played=e-t,this.paused=e}},speed:function(t){if(this.func&&isFinite(t))if(t){t/=this.v;var e=Date.now(),i=(e-this.played)/t;if(this.played=e-i,this.paused){var n=(e-this.paused)/t;this.paused=e-n}this.v*=t,this.active&&this.play()}else this.pause(),this.active=!0},remove:function(){this.func&&(this.pause(),delete this.func)}},e.exports=r},{"./rAF.js":17}],17:[function(t,e,i){!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),r=Math.max(0,16-(n-t)),s=window.setTimeout(function(){e(n+r)},r);return t=n+r,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()},{}],18:[function(t,e,i){function n(t){this.shapes=[],this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.ctx=this.canvas.getContext("2d")}var r=n.prototype;r.add=function(t){this.shapes.push(t),t.layer=this},r.draw=function(t){this.clear(),this.shapes.forEach(function(t){t.draw()})};var s=window.navigator.userAgent,o=/android/i.test(s)&&s.indexOf("534.30");o?(console.log("native_android_browser"),r.clear=function(t){this.ctx.clearRect(0,0,this.width,this.height),this.canvas.style.display="none",this.canvas.offsetHeight,this.canvas.style.display="inherit"}):r.clear=function(t){this.ctx.clearRect(0,0,this.width,this.height)},r.remove=function(t){this.clear(),this.shapes.forEach(function(t){delete t.layer}),this.shapes=[]},e.exports=n},{}],19:[function(t,e,i){function n(t){this.shape=t}n.prototype.draw=function(){var t=this.shape,e=this.layer;e.ctx.beginPath(),e.ctx.arc(t.x,t.y,t.radius,0,2*Math.PI),e.ctx.closePath(),t.fill&&(e.ctx.fillStyle=t.fill,e.ctx.fill())},n.prototype.setX=function(t){this.shape.x=t},n.prototype.setY=function(t){this.shape.y=t},e.exports=n},{}],20:[function(t,e,i){function n(t){this.layers=[];var e=this.container=document.getElementById(t.container);if(!e)throw new Error("element #"+t.container+" does not exist");var i=e.style;i.position="relative",i.width=t.width+"px",i.height=t.height+"px",i.overflow="hidden",this.width=parseInt(t.width),this.height=parseInt(t.height)}n.prototype.add=function(t){var e=t.canvas;this.layers.push(t),e.width=t.width=this.width,e.height=t.height=this.height,this.container.appendChild(e)},n.prototype.resize=function(t){var e=parseInt(t.width),i=parseInt(t.height),n=this.container.style;isFinite(e)&&(n.width=e+"px",this.width=e),isFinite(i)&&(n.height=i+"px",this.height=i)},e.exports=n},{}],21:[function(t,e,i){e.exports={Animation:t("./Animation/Animation.js"),Stage:t("./Canvas/Stage.js"),Layer:t("./Canvas/Layer.js"),Circle:t("./Canvas/Shape/Circle.js")}},{"./Animation/Animation.js":16,"./Canvas/Layer.js":18,"./Canvas/Shape/Circle.js":19,"./Canvas/Stage.js":20}],22:[function(t,e,i){function n(t){var e=this._values={},i=this._methods={};this.maxLength=1/0,"function"==typeof t?i.get=t:(this.maxLength="number"==typeof t.maxLength?t.maxLength:1/0,t.get?i.get=t.get:t.next&&(i.next=t.next));var n=this._elems=i.get?{}:[];for(var r in t){var s=t[r];/0|[1-9]\d*/.exec(r)?n[r]=s:"init"===r&&t.init.call(e)}}function r(t,e,i){for(var n=[],r=e;i>r;++r){var s=t[r];if(void 0===s)break;n.push(s)}return n}function s(t,e,i){var n=this._elems,r=this.maxLength;void 0!==r&&e>r&&(e=r);for(var s=t;e>s;++s)if(void 0===n[s]){var o=i.call(this,s);if(void 0===o){this.maxLength=s;break}n[s]=o}}n.prototype.get=function(t){return this.slice(t,t+1)[0]},n.prototype.slice=function(t,e){var i=this._elems,n=this._methods;if(n.get)s.call(this,t,e,function(t){return n.get.call(null,t)});else{var o=n.next.length;s.call(this,i.length,e,function(t){var e=this._elems.slice(t-o).reverse();return n.next.apply(this._values,e)})}return r(i,t,e)},e.exports=n},{}],23:[function(t,e,i){"use strict";function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=Object.assign||function(t,e){for(var i,r,s=n(t),o=1;o<arguments.length;o++){i=arguments[o],r=Object.keys(Object(i));for(var a=0;a<r.length;a++)s[r[a]]=i[r[a]]}return s}},{}],24:[function(t,e,i){e.exports={Buffer:t("./src/Buffer"),Generator:t("./src/Generator")}},{"./src/Buffer":25,"./src/Generator":26}],25:[function(t,e,i){function n(t){return this.minLength=0,this.maxLength=1/0,this instanceof n?void(this.patterns=new c({init:function(){this.balls=t.balls,this.period=t.period,this.height=t.height,r.call(this)},next:function(){return s(this)}})):new n(t)}function r(){this.balls=d(this,"balls",function(t){return t.balls.max}),this.period=d(this,"period",1),this.height=d(this,"height",0,function(t){return t.balls.max*t.period.max}),this.b=this.balls.max}function s(t){for(;t.b>=t.balls.min;){for(void 0===t.p&&(t.p=t.period.max,periodMin=Math.max(t.period.min,2));t.p>=periodMin;){for(void 0===t.h&&(heightMax=Math.min(t.height.max,t.p*t.b),heightMin=Math.max(t.height.min,t.b+1),t.h=heightMax);t.h>=heightMin;){void 0===t.pos&&o(t);for(var e=a(t);e;)return e;t.pos=void 0,--t.h}t.h=void 0,--t.p}if(t.period.min<=1&&1<=t.period.max&&t.height.min<=t.b&&t.b<=t.height.max)return t.p=void 0,[t.b--];t.p=void 0,--t.b}return void 0}function o(t){t.used={},t.stack=new u,t.array=[],t.pos=0,t.rest=t.b*t.p,t.val=t.h,t.top={min:t.h,index:-1},t.i=t.h,t.num=t.h%t.p,l(t)}function a(t){if(1===t.p&&t.b===t.h)return[balls];for(;t.i>=t.top.min||1!==t.pos;)if(t.pos<t.p)t.i<t.top.min?h(t):(t.num=(t.i+t.pos)%t.p,void 0===t.used[t.num]?l(t):--t.i);else{if(0===t.top.index){var e=[].concat(t.array);return h(t),e}h(t)}return!1}function l(t){if(t.top.index=t.val>t.i?0:t.top.index+1,t.used[t.num]=!0,t.array.push(t.i),t.val=t.array[t.top.index],t.rest-=t.i,++t.pos,t.stack.push(t.top),t.pos<t.p){var e=t.p-t.pos;t.i=Math.min(t.val,t.rest);var i=t.rest-t.h*(e-1);e>1&&i++,t.top={min:Math.max(i,0),index:t.top.index}}}function h(t){t.top=t.stack.pop(),t.top.index=t.stack.top().index,t.val=t.array[t.top.index],--t.pos,t.rest+=t.i=t.array.pop(),t.num=(t.i+t.pos)%t.p,t.used[t.num]=void 0,--t.i}function u(){this.elems=[]}var c=t("lazyarray-lite"),d=t("./utils.js").checkValidParameter;n.prototype.slice=function(t,e){var i=this.patterns.slice(t,e);return"number"!=typeof this.length&&(this.minLength=Math.min(this.patterns.maxLength,e),this.maxLength=Math.min(this.patterns.maxLength,this.maxLength),this.minLength===this.maxLength&&(this.length=this.minLength)),i},e.exports=n,u.prototype={push:function(t){return this.elems.push(t)},pop:function(){return this.elems.pop()},top:function(){return this.elems[this.elems.length-1]}}},{"./utils.js":27,"lazyarray-lite":22}],26:[function(t,e,i){function n(t){var e=new r(t);return e.slice(0,1/0)}var r=t("./Buffer.js");e.exports=n},{"./Buffer.js":25}],27:[function(t,e,i){function n(t){return"object"==typeof t&&null!==t}function r(t,e,i){return"`"+t+"` is "+e+". Expected "+i.join(" or ")+"."}function s(t,e,i,s){var o=t[e],a=void 0!==s,l=void 0!==i;if(l&&a&&void 0===o)o={max:"function"==typeof s?s(t):s,min:"function"==typeof i?i(t):i};else{if("number"==typeof o&&(t[e]=o={max:o}),!n(o))throw new Error(r(e,null===o?"null":typeof o,["number","non-null object"]));if(a&&void 0===o.max)o.max="function"==typeof s?s(t):s;else if("number"!=typeof o.max)throw new Error(r(e+".max",null===o.max?"null":typeof o.max,["number"]));if(void 0===o.min)o.min="function"==typeof i?i(t):i;else if("number"!=typeof o.min)throw new Error(r(e+".min",null===o.min?"null":typeof o.min,["number","undefined"]))}return o}e.exports={checkValidParameter:s}},{}],28:[function(t,e,i){function n(){"use strict";var t,e,i,s,o,l,h=arguments[0],u=1,c=arguments.length,d=!1;for("boolean"==typeof h?(d=h,h=arguments[1]||{},u=2):("object"!=typeof h&&"function"!=typeof h||null==h)&&(h={});c>u;++u)if(t=arguments[u],null!=t)for(e in t)i=h[e],s=t[e],h!==s&&(d&&s&&(a(s)||(o=Array.isArray(s)))?(o?(o=!1,l=i&&Array.isArray(i)?i:[]):l=i&&a(i)?i:{},h[e]=n(d,l,s)):s!==r&&(h[e]=s));return h}var r,s=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=function(t){"use strict";if(!t||"[object Object]"!==o.call(t))return!1;var e=s.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&s.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!i)return!1;var n;for(n in t);return n===r||s.call(t,n)};e.exports=n},{}],29:[function(t,e,i){function n(t,e){var i,n=e.time,r=e.position,s=n.now;if(s<n.thrown){i=r.middle.x-r.start.x,t.setX(r.start.x+i*s/n.thrown);var o=.5*e.gravity*n.thrown;t.setY(r.start.y-o*s+.5*e.gravity*s*s)}else i=r.end.x-r.middle.x,t.setX(r.middle.x+i*(s-n.thrown)/n.caught),t.setY(r.middle.y)}var r=t("kinemajs"),s=t("./extend.js"),o=function(){function t(t,e){var i,n=t.juggling,r=t.stage,s=(e-n.waiting.time)*n.interval;if(r.width){var o=(n.integer_height-n.waiting.time)*n.interval,a=o/s;i=a*r.width}else{var o=(3-n.waiting.time)*n.interval,a=o/s;i=1.5*n.height*a}return{width:.5*i,gravity:8*n.height/(s*s),shift:n.waiting.shift*a,radius:n.balls.radius*a}}function e(e){this.attrs={},this.attrs=s(!0,this.attrs,{stage:{width:500,height:650},juggling:{interval:500,waiting:{time:.5,shift:50},integer_height:5,balls:{radius:10,colors:["red","blue","green","yellow","black","orange","purple"]},height:.8*e.stage.height,center:{x:.5*e.stage.width,y:.9*e.stage.height}},layer:new r.Layer},e),this.attrs.stage=new r.Stage(this.attrs.stage),this.attrs.stage.add(this.attrs.layer);var i=this.attrs.juggling,n=t(this.attrs,this.attrs.juggling.integer_height);i.width=n.width,i.gravity=n.gravity}for(var i="abcdefghijklmnopqrstuvwxyz",o={},a=0;10>a;++a)o[a]=a;for(var a=0;a<i.length;++a)o[i[a]]=a+10;return e.toPattern=function(t){return t.split("").map(function(t){return o[t]})},e.prototype.setPattern=function(i){"string"==typeof i&&(i=e.toPattern(i));var s,o,a,l,h=this.attrs,u=(h.stage,h.juggling),c=Math.max.apply(null,i);if(c>u.integer_height){var d=t(h,c);l=d.width,a=d.gravity,o=d.shift,s=d.radius}else o=u.waiting.shift,l=u.width,a=u.gravity,s=u.balls.radius;var p=i.reduce(function(t,e){return t+e},0);if(p%i.length!=0)throw new Error("El patró "+i+" es irrealitzable. Es necessita un nombre enter de boles. Actualment: "+p/i.length);p/=i.length;for(var f=[],m=0;m<i.length;++m){var g={};g.value=i[m],g.next=(m+g.value)%i.length,g.period=(g.value-u.waiting.time)*u.interval,g.velocity=.5*a*g.period,f.push(g)}for(var m=0;m<i.length;++m)if(!f[m].cycle){for(var v={},y=m,b=0;!v[y];)v[y]=!0,y=f[y].next,b+=f[y].value;for(var y in v)f[y].cycle=b}var w=u.center.y;o/=2;var x=u.center.x-l/2,j=u.center.x+l/2,$=0,k=0,m=0,_=0,M={};for(this.balls=[];p>m;){if(0!==f[k].value)if(void 0===M[$]){M[$]=m,M[$+f[k].value]=m,++m;var V={figure:new r.Circle({x:$%2===0?x+15:j-15,y:w,radius:s||10,fill:u.balls.colors[_%u.balls.colors.length]}),start:$,cycle:f[k].cycle};this.balls.push(V),h.layer.add(V.figure),++_}else M[$+f[k].value]=f[k].value;++$,k=$%f.length}var O=this;h.animation=new r.Animation(function(t){var e=Math.floor(t.time/u.interval);O.balls.forEach(function(i){var r=t.time-u.interval*i.start;if(r>=0){r%=i.cycle*u.interval;for(var s,l=i.start%f.length;;){s=f[l].value;var h=s*u.interval;if(h>r)break;r-=h,l=f[l].next}var c=e-Math.floor(r/u.interval),d={};d.start=c%2===0?{x:x+o,y:w}:{x:j-o,y:w},(c+f[l].value)%2===0?(d.middle={x:x-o,y:w},d.end={x:x+o,y:w}):(d.middle={x:j+o,y:w},d.end={x:j-o,y:w});var p={value:f[l].value,time:{total:u.interval,thrown:f[l].period,caught:u.interval*f[l].value-f[l].period,now:r},left:c%2===0,gravity:a,position:d};n(i.figure,p)}}),h.layer.draw()})},e.prototype.removePattern=function(){var t=this;t.attrs.animation.stop(),t.attrs.layer.remove()},e.prototype.play=function(){var t=this.attrs.animation;t&&t.play()},e.prototype.pause=function(){var t=this.attrs.animation;t&&t.pause()},e.prototype.mute=function(){var t=this.attrs.animation;t&&t.mute()},e.prototype.stop=function(){var t=this.attrs.animation;t&&t.stop(),this.attrs.layer.remove()},e.prototype.speed=function(t){var e=this.attrs.animation;e&&e.speed(t)},e.prototype.colors=function(t){this.stop(),this.attrs.juggling.balls.colors=[].concat(t)},e}();e.exports=o},{"./extend.js":28,kinemajs:21}],30:[function(t,e,i){var n=t("./views/root/AppView"),r=(t("./views/layouts/LayoutView"),t("./views/layouts/HeaderView")),s=t("./views/layouts/GeneratorView"),o=t("./views/layouts/SimulatorView"),a=t("./views/keyboard/KeyboardView"),l=t("./views/keyboard/PatternsKeyboardView"),h=t("./views/keyboard/ControlBarView"),u=t("./views/dashboard/DashboardView"),c=t("./views/dashboard/FieldView"),d=t("./views/dashboard/FieldsetView"),p=t("./views/dashboard/CreateButtonView"),f=t("./views/dashboard/DescriptionView"),m=t("./views/dashboard/DescriptionFragmentView"),g=t("./models/SiteswapOptions"),v=t("./models/siteswapOptionsDefaults"),y=t("./models/AppModel"),b=t("./models/BallsOptions"),w=t("./models/PeriodOptions"),x=t("./models/HeightOptions"),j=new y({layout:"header"}),$=new b(v.balls),k=new w(v.period),_=new x(v.height),M=new g({balls:$,period:k,height:_}),V={balls:new a({el:"#keyboard-balls",name:"balls",model:$,appModel:j,end:25}),period:new a({el:"#keyboard-periods",name:"period",model:k,appModel:j,end:10}),height:new a({el:"#keyboard-heights",name:"height",model:_,appModel:j,end:25}),patterns:new l({el:"#keyboard-patterns",name:"patterns",model:M,appModel:j})},O=new h({el:"#keyboard",appModel:j,keyboardViews:V,patternsKeyboardView:V.patterns}),C=({balls:{minView:new c({el:"#balls-min",fieldset:"balls",field:"min",appModel:j,rangeModel:$}),maxView:new c({el:"#balls-max",fieldset:"balls",field:"max",appModel:j,rangeModel:$})},period:{minView:new c({el:"#periods-min",fieldset:"period",field:"min",appModel:j,rangeModel:k}),maxView:new c({el:"#periods-max",fieldset:"period",field:"max",appModel:j,rangeModel:k})},height:{minView:new c({el:"#heights-min",fieldset:"height",field:"min",appModel:j,rangeModel:_}),maxView:new c({el:"#heights-max",fieldset:"height",field:"max",appModel:j,rangeModel:_})}},{balls:new d({name:"balls",el:"#fieldset-balls",model:$,appModel:j}),period:new d({name:"period",el:"#fieldset-period",model:k,appModel:j}),height:new d({name:"height",el:"#fieldset-height",model:_,appModel:j})},new f({error:"#error",success:"#success",model:M,balls:new m({el:"#description-balls",name:"balls",model:$}),period:new m({el:"#description-period",name:"period",model:k}),height:new m({el:"#description-height",name:"height",model:_})}),new p({el:"#create",model:M,appModel:j}),new u({el:"#generator",appModel:j})),L=t("./routes/Router");L.model=M,L.appModel=j;{var S={header:new r({el:"#header",appRouter:L,controlBarView:O,appModel:j}),generator:new s({el:"#generator",appRouter:L,dashboardView:C,controlBarView:O,appModel:j}),simulator:new o({el:"#simulator",appRouter:L,controlBarView:O,patternsKeyboardView:V.patterns,model:M,appModel:j})};new n({layouts:S,dashboard:C,appRouter:L,model:j})}L.start()},{"./models/AppModel":31,"./models/BallsOptions":32,"./models/HeightOptions":33,"./models/PeriodOptions":34,"./models/SiteswapOptions":36,"./models/siteswapOptionsDefaults":37,"./routes/Router":38,"./views/dashboard/CreateButtonView":44,"./views/dashboard/DashboardView":45,"./views/dashboard/DescriptionFragmentView":46,"./views/dashboard/DescriptionView":47,"./views/dashboard/FieldView":48,"./views/dashboard/FieldsetView":49,"./views/keyboard/ControlBarView":50,"./views/keyboard/KeyboardView":51,"./views/keyboard/PatternsKeyboardView":52,"./views/layouts/GeneratorView":53,"./views/layouts/HeaderView":54,"./views/layouts/LayoutView":55,"./views/layouts/SimulatorView":56,"./views/root/AppView":57}],31:[function(t,e,i){var n=t("frontpiece.model"),r=n.extend({initialize:function(t){this.on("change:layout",function(t){current=this.get("layout"),t!==current&&(t&&this.trigger("layout-"+t+":inactive"),current&&this.trigger("layout-"+current+":active"))}),this.on("change:keyboard",function(t){var e=this.get("keyboard");t&&this.trigger("keyboard-"+t+":inactive"),e&&this.trigger("keyboard-"+e+":active"),!t&&e?this.trigger("keyboard:active"):t&&!e&&this.trigger("keyboard:inactive")}),this.on("change:focus",function(t){current=this.get("focus"),t!==current&&(t&&this.trigger("blur:"+t),current&&this.trigger("focus:"+current));var e=t?t.split("."):[],i=current?current.split("."):[],n=e[0],r=i[0],s=i[1];n!==r&&(n&&this.trigger("blur:"+n),r&&this.trigger("focus:"+r)),t!==current&&r&&this.trigger("click:"+r,s)})}});e.exports=r},{"frontpiece.model":5}],32:[function(t,e,i){var n=t("./RangeOptions"),r=n.extend({initialize:function(t){this.name="balls",this.get("min")||this.set("min",this.get("max"))}});e.exports=r},{"./RangeOptions":35}],33:[function(t,e,i){var n=t("./RangeOptions"),r=n.extend({initialize:function(){this.name="height",this.get("min")||this.set("min",1)}});e.exports=r},{"./RangeOptions":35}],34:[function(t,e,i){var n=t("./RangeOptions"),r=n.extend({initialize:function(t){this.name="period",this.get("min")||this.set("min",1)}});e.exports=r},{"./RangeOptions":35}],35:[function(t,e,i){var n=t("./../../messages/lang/ca.js").message,r=t("frontpiece.recursive-model"),s=r.extend({validate:function(t){return t.min>t.max?n.invalidRange(t,this.name):void 0}});e.exports=s},{"./../../messages/lang/ca.js":59,"frontpiece.recursive-model":7}],36:[function(t,e,i){var n=t("./../../messages/lang/ca.js").message,r=t("frontpiece.recursive-model"),s=r.extend({initialize:function(t,e){var i=t.balls,n=t.period,r=t.height;this.set("balls",i),this.set("period",n),r.get("max")||r.set("max",i.get("max")*n.get("max")),this.set("height",r)},validate:function(t){return t.height.max<=t.balls.min&&t.period.min>1?n.emptyWithBigPeriod():1===t.period.min&&t.height.max<t.balls.min?n.emptyWithLittlePeriod():void 0}});e.exports=s},{"./../../messages/lang/ca.js":59,"frontpiece.recursive-model":7}],37:[function(t,e,i){e.exports={balls:{max:3},period:{min:2,max:3},height:{max:5}}},{}],38:[function(t,e,i){var n=t("frontpiece.router"),r=t("./callbacks"),s=new n;s.on(/^header(?:\/?(\?.+))?/,r.header).on(/^generator(?:\/?(\?.+))?/,r.generator).on(/^simulator(?:\/?(\?.+))?/,r.simulator),e.exports=s},{"./callbacks":39,"frontpiece.router":12}],39:[function(t,e,i){e.exports={header:t("./callbacks/header"),generator:t("./callbacks/generator"),simulator:t("./callbacks/simulator")}},{"./callbacks/generator":40,"./callbacks/header":41,"./callbacks/simulator":42}],40:[function(t,e,i){function n(t){t||(t=""),r.call(this,t,this.model.get()),this.appView.scroll("generator")}{var r=t("../middleware/createModel");t("../../models/siteswapOptionsDefaults")}e.exports=n},{"../../models/siteswapOptionsDefaults":37,"../middleware/createModel":43}],41:[function(t,e,i){function n(t,e){this.appView.scroll("header")}e.exports=n},{}],42:[function(t,e,i){function n(t,e){var i=r.call(this,e,this.model.get()),n=this.appView,s=n.layouts.simulator;s.trigger("create",i),this.appModel.trigger("create",i),n.scroll("simulator")}{var r=t("../middleware/createModel");t("../../models/siteswapOptionsDefaults")}e.exports=n},{"../../models/siteswapOptionsDefaults":37,"../middleware/createModel":43}],43:[function(t,e,i){function n(t,e){var i=r(t);return["balls","period","height"].forEach(function(t){i[t]||(i[t]={}),["min","max"].forEach(function(n){i[t][n]||(i[t][n]=e[t][n])})}),this.model.set(i),i}{var r=t("../../../utils/siteswapOptionsDecode");t("../../models/SiteswapOptions"),t("object-assign")}e.exports=n},{"../../../utils/siteswapOptionsDecode":62,"../../models/SiteswapOptions":36,"object-assign":23}],44:[function(t,e,i){var n=t("frontpiece.view"),r=t("querystring"),s=t("../../../utils/range").encode,o=n.extend({initialize:function(t){var e=this;this.$el=$(t.el),this.el=this.$el[0];var i=this.model=t.model,n=this.appModel=t.appModel;this.render(),i.on("valid",function(){e.render(),n.trigger("simulator-enabled")}),i.on("invalid",function(){e.render(),n.trigger("simulator-disabled")})},render:function(){var t=this.model;if(t.isValid()){var e=t.get();for(var i in e)e[i]=s(e[i]);var n=r.encode(e);this.$el.attr("href","#simulator/?"+n),this.$el.removeClass("disabled")}else this.$el.addClass("disabled")}});e.exports=o},{"../../../utils/range":61,"frontpiece.view":13,querystring:4}],45:[function(t,e,i){var n=t("frontpiece.view"),r=n.extend({initialize:function(t){this.$el=$(t.el),this.el=this.$el[0];{var e=this.appModel=t.appModel;this.model=t.model}this.$el.on("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.get("focus");i&&e.set("focus",void 0)})}});e.exports=r},{"frontpiece.view":13}],46:[function(t,e,i){var n=t("frontpiece.view"),r=t("../../../messages/generate-text.js"),s=t("./../../../messages/lang/ca.js"),o=n.extend({initialize:function(t){var e=this;this.name=t.name,this.$el=$(t.el),this.model=t.model,this.model.isValid()&&e.render(),this.model.on("valid",function(t,i){e.render()})},render:function(){this.$el.text(r[this.name]({},this.model.get(),this.$el,s))}});e.exports=o},{"../../../messages/generate-text.js":58,"./../../../messages/lang/ca.js":59,"frontpiece.view":13}],47:[function(t,e,i){var n=t("frontpiece.view"),r=n.extend({
initialize:function(t){var e=this;this.$error=$(t.error),this.$success=$(t.success),this.success={},["balls","period","height"].forEach(function(e){this.success[e]=t[e]}),this.model=t.model,this.model.on("invalid",function(t,i){e.render(i)}),this.model.on("valid",function(){e.render()}),this.model.isValid()?this.render():this.render(siteswapOptions.validationError)},render:function(t,e){t?(this.$error.text(t),this.$error.removeClass("js-hide"),this.$success.addClass("js-hide")):(this.$success.removeClass("js-hide"),this.$error.addClass("js-hide"))}});e.exports=r},{"frontpiece.view":13}],48:[function(t,e,i){var n=t("frontpiece.view"),r=n.extend({initialize:function(t){var e=this;this.fieldset=t.fieldset,this.field=t.field;var i=this.fieldset+"."+this.field;this.$el=$(t.el),this.el=e.$el[0];var n=this.appModel=t.appModel,r=this.rangeModel=t.rangeModel;this.computeStyles(),this.render(),this.$el.on("click",function(t){t.preventDefault(),t.stopPropagation(),n.set("focus",i)}),r.on("change:"+this.field,function(){e.render()}),n.on("focus:"+this.fieldset+"."+this.field,function(){e.$el.addClass("js-select")}),n.on("blur:"+i,function(){e.$el.removeClass("js-select")})},render:function(){var t=this.rangeModel.get(this.field);this.$el.text(t)},computeStyles:function(){this.width=this.$el.width(),this.$el.width(this.width),this.minWidth="40px"}});e.exports=r},{"frontpiece.view":13}],49:[function(t,e,i){var n=t("frontpiece.view"),r=t("../../../utils/native_android_browser"),s=n.extend({initialize:function(t){var e=this;this.name=t.name,this.$el=$(t.el),this.el=this.$el[0];var i=(this.model=t.model,this.appModel=t.appModel);this.computeStyles(),$item=$(".editable",e.$el),$item.addClass("expanded"),this.blur(),this.$el.on("click",function(t){t.preventDefault(),t.stopPropagation();var n=i.get("focus"),r=e.name+".min";n!==r&&i.set("focus",r)}),i.on("focus:"+this.name,function(){i.set("generatorKB",e.name),i.set("keyboard",e.name),$item=$(".editable",e.$el),$item.addClass("expanded"),$item.removeClass("minEqMax minLessOrEq1")}),i.on("blur:"+this.name,function(){i.set("generatorKB",void 0),i.set("keyboard",void 0),e.blur()})},computeStyles:function(){r&&$(".editable",this.$el).addClass("android-browser"),$(".collapsed",this.$el).each(function(t,e){var i=$(e);i.removeClass("js-hide");var n=i.outerWidth();i.data("width",n),i.css("width",n)}),$(".word-expanded",this.$el).each(function(t,e){var i=$(e),n=i.outerWidth();i.data("width",n),i.css("width",n)})},blur:function(){var t=$(".editable",this.$el),e=this.model.get("min"),i=this.model.get("max");e===i?(t.removeClass("expanded"),t.addClass("minEqMax")):1===e&&(t.removeClass("expanded"),t.addClass("minLessOrEq1"))}});e.exports=s},{"../../../utils/native_android_browser":60,"frontpiece.view":13}],50:[function(t,e,i){var n=t("frontpiece.view"),r=n.extend({initialize:function(t){var e=this,i=this.$el=$(t.el);this.el=i[0];var n=this.appModel=t.appModel;this.keyboardViews=t.keyboardViews,this.width=i.outerWidth();{var r=$("#keyboard-left",i).outerWidth(),s=$("#keyboard-right",i).outerWidth();e.width-r-s}this.currentKB={simulator:t.patternsKeyboardView},this.layout=void 0,n.on("keyboard:active",function(){e.$el.removeClass("js-hide")}),n.on("keyboard:inactive",function(){e.$el.addClass("js-hide")}),this.$el.on("click","#keyboard-left",function(t){t.preventDefault(),t.stopPropagation(),e.triggerKeyboard("left")}),this.$el.on("click","#keyboard-right",function(t){t.preventDefault(),t.stopPropagation(),e.triggerKeyboard("right")}),this.$el.on("click",function(t){t.preventDefault(),t.stopPropagation()})},triggerKeyboard:function(t){var e=this.appModel;e.trigger("keyboard-"+e.get("keyboard")+":move",t)}});e.exports=r},{"frontpiece.view":13}],51:[function(t,e,i){var n=t("frontpiece.view"),r=t("lazyarray-lite"),s=n.extend({initialize:function(t){var e=this;this.name=t.name,this.$el=$(t.el),this.el=this.$el[0],$parent=this.$el.parents(".keyboard");var i=$parent.find("#keyboard-left").outerWidth(),n=$parent.find("#keyboard-right").outerWidth();this.width=$parent.outerWidth()-i-n;var s=this.model=t.model,o=this.appModel=t.appModel;this.lazyListOptions=this.model.get(),t.start||(t.start=1),this.end=t.end||1/0,this.position=0,this.transform=t.transform||function(t){return t},this.lazyListConstructor=t.lazyListConstructor||function(){return new r({get:function(e){return e+t.start},maxLength:this.end})},this.create(),"patterns"!==this.name&&o.on("click:"+this.name,function(t){var i=s.get(t);e.trigger("click-key",$(".number-"+i,e.$el))}),o.on("keyboard-"+this.name+":active",function(){e.$el.addClass("js-select")}),o.on("keyboard-"+this.name+":inactive",function(){e.$el.removeClass("js-select")}),o.on("keyboard-"+this.name+":move",function(t){e.trigger(t)}),this.on("left",function(){this.left(.6*this.width)}),this.on("right",function(){this.right(.6*this.width)}),this.on("click-key",function(t){var e=$(".js-select",this.$el),i=parseInt(t.text());if(e[0]&&e.removeClass("js-select"),t.addClass("js-select"),this.center(t),"patterns"!==this.name){var n=o.get("focus").split(".")[1];this.model.set(n,i)}}),this.$el.on("click",".keyboard-btn",function(){e.trigger("click-key",$(this))})},left:function(t){this.$el.outerWidth();this.position-=t,this.position<0&&(this.position=0),this.$el.css("left",-this.position)},right:function(t){var e=this.$el.outerWidth();this.position+=t,this.position>this.maxWidth&&(this.position=this.maxWidth>0?this.maxWidth:0),this.$el.css("left",-this.position),this.position+2*this.width>e&&this.index<this.keys_list.maxLength&&this.append()},center:function(t){var e=t.offset().left,i=.5*$(window).outerWidth()-e;0>i?this.right(-i):this.left(i)},append:function(){var t=this.transform,e=this.index;this.index+=30;var i=this.keys_list.slice(e,this.index);$.fn.append.apply(this.$el,i.map(function(e){return'<li><span class="numbers keyboard-btn number-'+t(e)+'">'+t(e)+"</span></li>"}));var n=this.$el.outerWidth();this.maxWidth===1/0&&this.index>=this.keys_list.maxLength&&(this.maxWidth=n-this.width)},create:function(){this.index=0,this.maxWidth=1/0,this.keys_list=this.lazyListConstructor(this.lazyListOptions),this.position=0,this.$el.empty().css("left",0),this.append()}});e.exports=s},{"frontpiece.view":13,"lazyarray-lite":22}],52:[function(t,e,i){var n=t("./KeyboardView"),r=t("siteswap-generator"),s=n.extend({initialize:function(t){var e=this,i=this.appModel=t.appModel,s="0123456789abcdefghijklmnopqrstuvwxyz";t.transform=function(t){return t.map(function(t){return s[t]}).join("")},t.lazyListConstructor=function(t){var e=new r.Buffer(t);return e},n.prototype.initialize.call(this,t),this.on("click-key",function(t){var e=t.text(),i=this.simulatorView;i.render(e)}),i.on("create",function(t){e.lazyListOptions=t,e.create()})}});e.exports=s},{"./KeyboardView":51,"siteswap-generator":24}],53:[function(t,e,i){var n=t("./LayoutView"),r=n.extend({initialize:function(t){this.name="generator",n.prototype.initialize.call(this,t),this.appModel.on("layout-"+this.name+":active",function(){var t=this.get("generatorKB");t&&this.set("keyboard",t)})}});e.exports=r},{"./LayoutView":55}],54:[function(t,e,i){var n=t("./LayoutView"),r=n.extend({initialize:function(t){var e=this;this.name="header",n.prototype.initialize.call(this,t);var i=this.appModel;i.on("layout-"+this.name+":active",function(){e.$el.removeClass("reduce"),this.set("keyboard",void 0)}),i.on("layout-"+this.name+":inactive",function(){e.$el.addClass("reduce")})}});e.exports=r},{"./LayoutView":55}],55:[function(t,e,i){function n(t){return t.replace(/^\//,"").replace(/\/$/,"")}var r=t("frontpiece.view"),s=r.extend({initialize:function(t){var e=this,i=this.$el=$(t.el);this.el=i[0];var r=this.appRouter=t.appRouter;this.model=t.model,this.appModel=t.appModel,this.height=i.outerHeight(),this.bottom=i.offset().top+this.height,this.appModel.on("layout-"+this.name+":active",function(){var t=n(r.getFragment().split("?")[0]);t===e.name||""===t&&"header"===e.name||r.navigate(e.name)})}});e.exports=s},{"frontpiece.view":13}],56:[function(t,e,i){var n=t("./LayoutView"),r=t("../../../Juggler/juggler.js"),s=n.extend({initialize:function(t){var e=this;this.name="simulator",n.prototype.initialize.call(this,t);this.model=t.model;this.patternsKeyboardView=t.patternsKeyboardView,this.patternsKeyboardView.simulatorView=this,this.appModel.on("layout-"+this.name+":active",function(){this.set("keyboard","patterns"),e.render()})},render:function(t){if(!t)var e=this.patternsKeyboardView.keys_list,t=e.slice(0,1)[0];if(!this.juggler){var i=this.$el,n=i.width(),s=i.height();this.juggler=new r({stage:{container:"juggler-simulator",width:n,height:s}})}this.pattern!==t&&(this.juggler.stop(),this.juggler.setPattern(t),this.juggler.play(),this.pattern=t)}});e.exports=s},{"../../../Juggler/juggler.js":29,"./LayoutView":55}],57:[function(t,e,i){var n=t("frontpiece.view"),r=n.extend({el:window,initialize:function(t){var e=this;this.$el=$("body, html"),this.el=this.$el[0];var i=this.model=t.model;t.appRouter&&(this.appRouter=t.appRouter,this.appRouter.appView=this),this.layouts=t.layouts,this.bottoms=[];for(var n in this.layouts){var r=this.layouts[n];this.bottoms.push({bottom:r.bottom,name:n})}this.bottoms.sort(function(t,e){return t.bottom-e.bottom}),i.on("simulator-disabled",function(){$("#wrapper",e.$el).addClass("simulator-disabled")}),i.on("simulator-enabled",function(){$("#wrapper",e.$el).removeClass("simulator-disabled")}),this.scrollState=2,$(window).on("scroll",function(){if(1===e.scrollState)++e.scrollState;else if(2===e.scrollState)for(var t=$(window).scrollTop(),i=e.bottoms,n=i.length,r=0;n>r;++r){{var s=i[r];e.layouts[s.name]}if(s.bottom-60>=t){s.name!==e.model.get("layout")&&e.model.set("layout",s.name);break}}}),$(".internal-link").on("click",function(t){t.preventDefault(),t.stopPropagation();var i=$(this).attr("href").substr(1);e.appRouter.navigate(i,{trigger:!0})}),this.$el.on("click",".internal-link",function(t){t.preventDefault(),t.stopPropagation();var i=$(this).attr("href").substr(1);e.appRouter.navigate(i,{trigger:!0})})},scroll:function(t,e){var i=this,n=this.layouts[t],r=n.$el.offset().top;this.scrollState=0,$("body, html").animate({scrollTop:r},300,"swing",function(){i.scrollState=1,i.model.set("layout",t)})}});e.exports=r},{"frontpiece.view":13}],58:[function(t,e,i){e.exports={balls:function(t,e,i,n){t.error=!1,void 0!==e.min&&void 0!==e.max&&e.min<=e.max&&e.min>0?e.min===e.max?t.balls=n.balls[0](e.min,e.max):1===e.min?t.balls=n.balls[1](e.min,e.max):e.min<e.max&&(t.balls=n.balls[2](e.min,e.max)):t.error=n.balls[3](e.min,e.max),i.text(t.balls)},period:function(t,e,i,n){t.error=!1,void 0!==e.min&&void 0!==e.max&&e.min<=e.max&&e.min>0?e.min===e.max?t.period=n.periods[0](e.min,e.max):1===e.min?t.period=n.periods[1](e.min,e.max):e.min<e.max&&(t.period=n.periods[2](e.min,e.max)):t.error=n.periods[3](e.min,e.max),i.text(t.period)},height:function(t,e,i,n){t.error=!1,void 0===e.min&&void 0===e.max?t.height="":(void 0===e.min||e.min<=1)&&e.max>=0?t.height=n.heights[0](e.min,e.max):void 0===e.max&&e.min>=0?t.height=n.heights[1](e.min,e.max):e.min<=e.max&&e.min>=0?t.height=e.min===e.max?n.heights[2](e.min,e.max):n.heights[3](e.min,e.max):t.error=n.heights[4](e.min,e.max),i.text(t.height)}}},{}],59:[function(t,e,i){function n(t){return t[0].toUpperCase(t)+t.substring(1)}e.exports={order:["patterns","balls","periods","heights"],patterns:"Patrons",balls:[function(t,e){return"de "+e+" boles"},function(t,e){return"de màxim "+e+" boles"},function(t,e){return"de "+t+" a "+e+" boles"},function(t,e){return"L'interval de boles que demanes no es correcte"}],periods:[function(t,e){return"de període "+e},function(t,e){return"amb períodes no més grans de "+e},function(t,e){return"amb períodes entre "+t+" i "+e},function(t,e){return"L'interval de períodes que demanes no es correcte"}],heights:[function(t,e){return"amb llançaments no més alts de "+e},function(t,e){return"amb llançaments que continguin alguna alçada major o igual a "+t},function(t,e){return"amb algun llançament de "+t+" i no més alt"},function(t,e){return"amb llançaments majors o iguals a "+t+" i mai superiors a "+e},function(t,e){return"L'interval de períodes que demanes no es correcte"}],message:{isNotAInt:function(t){return t+"no és un nombre enter"},invalidRange:function(t,e){return e={balls:"el nombre de boles",period:"el període",height:"l'alçada"}[e],n(e)+" menor ("+t.min+") no pot sobrepassar "+e+" major ("+t.max+")"},emptyWithBigPeriod:function(){return"No existeixen patrons vàlids dintre del rang indicat. Prova que l'alçada màxima sigui major al nombre mínim de boles"},emptyWithLittlePeriod:function(){return"No existeixen patrons vàlids dintre del rang indicat. Prova que l'alçada màxima sigui major o igual al nombre mínim de boles"}}}},{}],60:[function(t,e,i){var n=window.navigator.userAgent;e.exports=/android/i.test(n)&&n.indexOf("534.30")},{}],61:[function(t,e,i){e.exports={encode:function(t){return t.min+"-"+t.max},decode:function(t){if("string"!=typeof t)return void 0;var e=t.split("-");if(2!==e.length)return void 0;var i=parseInt(e[0]),n=parseInt(e[1]);return e[0]!=i||e[1]!=n?void 0:{min:i,max:n}}}},{}],62:[function(t,e,i){function n(t){var e=r.decode(t);return["balls","period","height"].forEach(function(t){var i=s(e[t]);i&&(e[t]=i)}),e}var r=t("querystring"),s=t("./range").decode;e.exports=n},{"./range":61,querystring:4}]},{},[1]);